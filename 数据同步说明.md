# 数据同步说明

## 📱 网页端与桌面端数据同步

### 方式一：独立使用（推荐，数据保存在浏览器本地）

**访问地址：**
- GitHub Pages: `https://kexin94yyds.github.io/info-filter-desktop/`
- Netlify: `https://info-flow.netlify.app/web-dashboard.html`

**特点：**
- ✅ 完全独立，不需要连接桌面端
- ✅ 数据保存在浏览器本地（localStorage）
- ✅ 链接固定，可以收藏
- ✅ 关闭浏览器后重新打开，数据还在

### 方式二：连接桌面端同步（可选）

如果需要将网页端和桌面端的数据同步：

#### 步骤 1：打开桌面端应用
确保桌面端应用正在运行

#### 步骤 2：获取连接信息
1. 在桌面端应用中，点击"手机连接"按钮
2. 会显示一个二维码和链接

#### 步骤 3：在网页端连接
1. 扫描二维码，或
2. 访问显示的链接（格式：`https://info-flow.netlify.app/web-dashboard.html?peer=xxx`）

#### 步骤 4：等待同步
- 连接成功后，会自动同步数据
- 桌面端的数据会同步到网页端
- 网页端的数据也会同步到桌面端
- 两个端的数据会智能合并（去重）

### 🔄 同步机制说明

**连接时：**
- 网页端会立即请求桌面端的数据
- 如果网页端有本地数据，也会发送到桌面端
- 数据会智能合并（按 ID 去重，保留最新的）

**操作时：**
- 在网页端添加/删除/修改数据 → 自动同步到桌面端
- 在桌面端添加/删除/修改数据 → 自动同步到网页端

**断开连接后：**
- 网页端继续使用本地数据
- 数据保存在浏览器本地，不会丢失
- 下次连接时会再次同步

### ⚠️ 注意事项

1. **数据存储位置不同：**
   - 桌面端：存储在 `~/Library/Application Support/info-filter-desktop/`
   - 网页端：存储在浏览器 localStorage

2. **同步是可选的：**
   - 网页端可以完全独立使用
   - 连接桌面端只是为了同步数据（可选功能）

3. **数据合并策略：**
   - 连接时：智能合并两个数据源
   - 操作时：实时双向同步
   - 断开后：各自独立工作

4. **首次连接：**
   - 如果桌面端有数据，会同步到网页端
   - 如果网页端有数据，也会同步到桌面端
   - 数据会智能合并，不会丢失

### 🛠️ 故障排除

**无法连接：**
- 检查桌面端应用是否正在运行
- 检查网络连接
- 尝试刷新网页

**数据没有同步：**
- 确认连接成功（会显示"已连接到桌面端"）
- 等待几秒钟，同步可能需要时间
- 尝试刷新网页

**数据丢失：**
- 网页端数据保存在浏览器本地，清除浏览器数据会丢失
- 建议定期导出数据备份

